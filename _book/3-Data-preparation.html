<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Reza Mohammadi">
<title>3&nbsp; Data Preparation in Practice: From Raw Data to Insight – &lt;span style="color:#0056B3"&gt;Data Science Foundations and Machine Learning with R: From Data to Decisions&lt;/span&gt;
</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./4-Exploratory-data-analysis.html" rel="next">
<link href="./2-Intro-data-science.html" rel="prev">
<link href="./images/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-5c395c020fa0215c66c8d962dcba7617.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./3-Data-preparation.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Preparation in Practice: From Raw Data to Insight</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./"><span style="color:#0056B3">Data Science Foundations and Machine Learning with R: From Data to Decisions</span></a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/RezaMoammadi/Book-Data-Science-R" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="./-span-style=-color--0056B3--Data-Science-Foundations-and-Machine-Learning-with-R--From-Data-to-Decisions--span-.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./-span-style=-color--0056B3--Data-Science-Foundations-and-Machine-Learning-with-R--From-Data-to-Decisions--span-.epub">
              <i class="bi bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
</div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-Intro-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R Foundations for Data Science</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-Intro-data-science.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Data Science Workflow and the Role of Machine Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-Data-preparation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Preparation in Practice: From Raw Data to Insight</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-Exploratory-data-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5-Statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Statistical Inference and Hypothesis Testing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6-Setup-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Setup for Modeling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7-Classification-kNN.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification Using k-Nearest Neighbors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8-Model-evaluation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Model Evaluation and Performance Assessment</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9-Naive-Bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Naive Bayes Classifier</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-Regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Regression Analysis: Foundations and Applications</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-Tree-based-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Decision Trees and Random Forests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-Neural-networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Neural Networks: Foundations of Artificial Intelligence</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-Clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Clustering for Insight: Segmenting Data Without Labels</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-References.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#key-considerations-for-data-preparation" id="toc-key-considerations-for-data-preparation" class="nav-link active" data-scroll-target="#key-considerations-for-data-preparation"><span class="header-section-number">3.1</span> Key Considerations for Data Preparation</a></li>
  <li><a href="#sec-ch3-diamonds-prep" id="toc-sec-ch3-diamonds-prep" class="nav-link" data-scroll-target="#sec-ch3-diamonds-prep"><span class="header-section-number">3.2</span> Data Preparation in Action: The <code>diamonds</code> Dataset</a></li>
  <li><a href="#identifying-feature-types" id="toc-identifying-feature-types" class="nav-link" data-scroll-target="#identifying-feature-types"><span class="header-section-number">3.3</span> Identifying Feature Types</a></li>
  <li><a href="#sec-ch3-data-pre-outliers" id="toc-sec-ch3-data-pre-outliers" class="nav-link" data-scroll-target="#sec-ch3-data-pre-outliers"><span class="header-section-number">3.4</span> Outliers: What They Are and Why They Matter</a></li>
  <li><a href="#spotting-outliers-with-visual-tools" id="toc-spotting-outliers-with-visual-tools" class="nav-link" data-scroll-target="#spotting-outliers-with-visual-tools"><span class="header-section-number">3.5</span> Spotting Outliers with Visual Tools</a></li>
  <li><a href="#sec-ch3-handle-outliers" id="toc-sec-ch3-handle-outliers" class="nav-link" data-scroll-target="#sec-ch3-handle-outliers"><span class="header-section-number">3.6</span> How to Handle Outliers</a></li>
  <li><a href="#outlier-treatment-in-action" id="toc-outlier-treatment-in-action" class="nav-link" data-scroll-target="#outlier-treatment-in-action"><span class="header-section-number">3.7</span> Outlier Treatment in Action</a></li>
  <li><a href="#sec-ch3-missing-values" id="toc-sec-ch3-missing-values" class="nav-link" data-scroll-target="#sec-ch3-missing-values"><span class="header-section-number">3.8</span> Missing Values: What They Are and Why They Matter</a></li>
  <li><a href="#sec-ch3-imputation-techniques" id="toc-sec-ch3-imputation-techniques" class="nav-link" data-scroll-target="#sec-ch3-imputation-techniques"><span class="header-section-number">3.9</span> Imputation Techniques</a></li>
  <li>
<a href="#sec-ch3-data-pre-adult" id="toc-sec-ch3-data-pre-adult" class="nav-link" data-scroll-target="#sec-ch3-data-pre-adult"><span class="header-section-number">3.10</span> Case Study: Preparing Data to Predict High Earners</a>
  <ul class="collapse">
<li><a href="#overview-of-the-dataset" id="toc-overview-of-the-dataset" class="nav-link" data-scroll-target="#overview-of-the-dataset"><span class="header-section-number">3.10.1</span> Overview of the Dataset</a></li>
  <li><a href="#handling-missing-values" id="toc-handling-missing-values" class="nav-link" data-scroll-target="#handling-missing-values"><span class="header-section-number">3.10.2</span> Handling Missing Values</a></li>
  <li><a href="#handling-outliers" id="toc-handling-outliers" class="nav-link" data-scroll-target="#handling-outliers"><span class="header-section-number">3.10.3</span> Handling Outliers</a></li>
  </ul>
</li>
  <li><a href="#chapter-summary-and-takeaways" id="toc-chapter-summary-and-takeaways" class="nav-link" data-scroll-target="#chapter-summary-and-takeaways"><span class="header-section-number">3.11</span> Chapter Summary and Takeaways</a></li>
  <li><a href="#sec-ch3-exercises" id="toc-sec-ch3-exercises" class="nav-link" data-scroll-target="#sec-ch3-exercises"><span class="header-section-number">3.12</span> Exercises</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/RezaMoammadi/Book-Data-Science-R/edit/main/3-Data-preparation.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/RezaMoammadi/Book-Data-Science-R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-ch3-data-preparation" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Preparation in Practice: From Raw Data to Insight</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="chapterquote">
<p>The real world is messy.</p>
<div class="author">
<p>— Phil Karlton</p>
</div>
</div>
<p>In real-world settings, data rarely arrives in a clean, analysis-ready format. It often contains missing values, extreme observations, and inconsistent entries that reflect how data is collected in operational systems rather than designed for analysis. By contrast, many datasets encountered in teaching platforms or competitions are carefully curated, with well-defined targets and minimal preprocessing required. While such datasets are valuable for learning, they can give a misleading impression of what data science work typically involves.</p>
<p>This chapter focuses on one of the most underestimated yet indispensable stages of the Data Science Workflow: <em>data preparation</em>. Regardless of how sophisticated a statistical method or machine learning algorithm may be, its results are only as reliable as the data on which it is trained. Preparing data is therefore not a peripheral technical task but a core analytical activity that directly shapes model performance, interpretability, and credibility.</p>
<p>Throughout this chapter, you will develop practical strategies for identifying irregularities in data and deciding how they should be handled. Using visual diagnostics, summary statistics, and principled reasoning, you will learn how preparation choices, such as outlier treatment and missing-value handling, influence both analytical conclusions and downstream modeling results.</p>
<p>Several aspects of data preparation, including outlier detection and missing-value handling, naturally overlap with <em>Exploratory Data Analysis</em> (Chapter <a href="4-Exploratory-data-analysis.html" class="quarto-xref"><span>4</span></a>) and <em>Data Setup for Modeling</em> (Chapter <a href="6-Setup-data.html" class="quarto-xref"><span>6</span></a>). In practice, these stages are revisited iteratively rather than executed in a strict linear sequence.</p>
<section id="what-this-chapter-covers" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="what-this-chapter-covers">What This Chapter Covers</h3>
<p>This chapter introduces the essential techniques for transforming raw data into a format suitable for analysis and modeling. You will learn how to:</p>
<ul>
<li><p>identify and detect outliers using visual and summary-based techniques;</p></li>
<li><p>decide how to handle outliers through removal, transformation, or imputation;</p></li>
<li><p>identify missing values, including those encoded using nonstandard placeholders;</p></li>
<li><p>apply principled imputation strategies to numerical and categorical variables;</p></li>
<li><p>prepare real-world data for modeling through a complete, end-to-end case study.</p></li>
</ul>
<p>We begin by working with the <code>diamonds</code> dataset to demonstrate core data preparation techniques in a controlled setting. The chapter then progresses to a comprehensive case study based on the real-world <em>adult</em> income dataset, where these techniques are applied to a realistic prediction task. Together, these examples illustrate how thoughtful data preparation transforms raw data into a reliable foundation for meaningful insight and machine learning models.</p>
</section><section id="key-considerations-for-data-preparation" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="key-considerations-for-data-preparation">
<span class="header-section-number">3.1</span> Key Considerations for Data Preparation</h2>
<p>Before working with a specific dataset, it is useful to clarify the principles that guide data preparation decisions in practice. Across applications and domains, effective data preparation is shaped by three closely related considerations: data quality, feature engineering, and variable transformation.</p>
<p>First, data quality is essential. Data must be accurate, internally consistent, and free from values that would distort analysis. This includes identifying missing values, detecting outliers, and resolving implausible or inconsistent entries that could bias results or reduce model performance.</p>
<p>Second, feature engineering can substantially improve the usefulness of a dataset. Rather than relying solely on raw measurements, it is often beneficial to construct derived variables that better reflect the underlying phenomenon of interest. For example, combining multiple related measurements into a single, interpretable feature can provide a clearer signal for modeling than treating each input separately.</p>
<p>Finally, variables must be transformed into formats that are appropriate for modeling. Categorical features need to be encoded in ways that respect their structure and meaning, while numerical features may require scaling to ensure they contribute appropriately in models that rely on distance or gradient-based optimization. These transformations are discussed in greater detail in Chapter <a href="6-Setup-data.html" class="quarto-xref"><span>6</span></a>.</p>
<p>Together, these considerations provide a practical lens for the data preparation steps that follow. Rather than applying preprocessing techniques mechanically, they encourage decisions that are aligned with both the structure of the data and the goals of the analysis.</p>
</section><section id="sec-ch3-diamonds-prep" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="sec-ch3-diamonds-prep">
<span class="header-section-number">3.2</span> Data Preparation in Action: The <code>diamonds</code> Dataset</h2>
<p>How can we quantify the value of a diamond? Why do two stones that appear nearly identical command markedly different prices? In this section, we bring the concepts of data preparation to life using the <code>diamonds</code> dataset, a rich and structured collection of gem characteristics provided by the <strong>ggplot2</strong> package. This dataset serves as a practical setting for exploring how data preparation supports meaningful analysis.</p>
<p>Our central goal is to understand how features such as carat, cut, color, and clarity relate to diamond prices. Before applying any cleaning or transformation steps, however, we must first clarify the analytical objective and the questions that guide it. Effective data preparation begins with a clear understanding of the problem the data is meant to address.</p>
<p>We focus on three guiding questions: which features are most informative for explaining or predicting diamond price; whether systematic pricing patterns emerge across attributes such as carat weight or cut quality; and whether the dataset contains irregularities, including outliers or inconsistent values, that should be addressed prior to modeling.</p>
<p>From a business perspective, answering these questions supports more informed pricing and inventory decisions for jewelers and online retailers. From a data science perspective, it ensures that data preparation choices are aligned with the modeling task rather than applied mechanically. This connection between domain understanding and technical preparation is what makes data preparation both effective and consequential.</p>
<p>Later in the book, we return to the <code>diamonds</code> dataset in Chapter <a href="10-Regression.html" class="quarto-xref"><span>10</span></a>, where the features prepared in this chapter are used to build a predictive regression model, completing the progression from raw data to actionable insight.</p>
<section id="overview-of-the-diamonds-dataset" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="overview-of-the-diamonds-dataset">Overview of the <code>diamonds</code> Dataset</h3>
<p>We use the <code>diamonds</code> dataset from the <strong>ggplot2</strong> package, which contains detailed information on the physical characteristics and quality ratings of individual diamonds. Each row represents a single diamond, described by variables such as carat weight, cut, color, clarity, and price. Although the dataset is relatively clean, it provides a realistic setting for practicing key data preparation techniques that arise in applied data science. A natural first step in data preparation is to load the dataset and inspect its structure to understand what information is available and how it is represented.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To obtain an overview of the dataset’s structure, we use the <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> function:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(diamonds)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>   tibble [<span class="dv">53</span>,<span class="dv">940</span> × <span class="dv">10</span>] (S3<span class="sc">:</span> tbl_df<span class="sc">/</span>tbl<span class="sc">/</span>data.frame)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> carat  <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">53940</span>] <span class="fl">0.23</span> <span class="fl">0.21</span> <span class="fl">0.23</span> <span class="fl">0.29</span> <span class="fl">0.31</span> <span class="fl">0.24</span> <span class="fl">0.24</span> <span class="fl">0.26</span> <span class="fl">0.22</span> <span class="fl">0.23</span> ...</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> cut    <span class="sc">:</span> Ord.factor w<span class="sc">/</span> <span class="dv">5</span> levels <span class="st">"Fair"</span><span class="sc">&lt;</span><span class="st">"Good"</span><span class="sc">&lt;</span>..<span class="sc">:</span> <span class="dv">5</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">1</span> <span class="dv">3</span> ...</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> color  <span class="sc">:</span> Ord.factor w<span class="sc">/</span> <span class="dv">7</span> levels <span class="st">"D"</span><span class="sc">&lt;</span><span class="st">"E"</span><span class="sc">&lt;</span><span class="st">"F"</span><span class="sc">&lt;</span><span class="st">"G"</span><span class="sc">&lt;</span>..<span class="sc">:</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">6</span> <span class="dv">5</span> <span class="dv">2</span> <span class="dv">5</span> ...</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> clarity<span class="sc">:</span> Ord.factor w<span class="sc">/</span> <span class="dv">8</span> levels <span class="st">"I1"</span><span class="sc">&lt;</span><span class="st">"SI2"</span><span class="sc">&lt;</span><span class="st">"SI1"</span><span class="sc">&lt;</span>..<span class="sc">:</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> ...</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> depth  <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">53940</span>] <span class="fl">61.5</span> <span class="fl">59.8</span> <span class="fl">56.9</span> <span class="fl">62.4</span> <span class="fl">63.3</span> <span class="fl">62.8</span> <span class="fl">62.3</span> <span class="fl">61.9</span> <span class="fl">65.1</span> <span class="fl">59.4</span> ...</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> table  <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">53940</span>] <span class="dv">55</span> <span class="dv">61</span> <span class="dv">65</span> <span class="dv">58</span> <span class="dv">58</span> <span class="dv">57</span> <span class="dv">57</span> <span class="dv">55</span> <span class="dv">61</span> <span class="dv">61</span> ...</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> price  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">53940</span>] <span class="dv">326</span> <span class="dv">326</span> <span class="dv">327</span> <span class="dv">334</span> <span class="dv">335</span> <span class="dv">336</span> <span class="dv">336</span> <span class="dv">337</span> <span class="dv">337</span> <span class="dv">338</span> ...</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> x      <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">53940</span>] <span class="fl">3.95</span> <span class="fl">3.89</span> <span class="fl">4.05</span> <span class="fl">4.2</span> <span class="fl">4.34</span> <span class="fl">3.94</span> <span class="fl">3.95</span> <span class="fl">4.07</span> <span class="fl">3.87</span> <span class="dv">4</span> ...</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> y      <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">53940</span>] <span class="fl">3.98</span> <span class="fl">3.84</span> <span class="fl">4.07</span> <span class="fl">4.23</span> <span class="fl">4.35</span> <span class="fl">3.96</span> <span class="fl">3.98</span> <span class="fl">4.11</span> <span class="fl">3.78</span> <span class="fl">4.05</span> ...</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> z      <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">53940</span>] <span class="fl">2.43</span> <span class="fl">2.31</span> <span class="fl">2.31</span> <span class="fl">2.63</span> <span class="fl">2.75</span> <span class="fl">2.48</span> <span class="fl">2.47</span> <span class="fl">2.53</span> <span class="fl">2.49</span> <span class="fl">2.39</span> ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This output reveals that the dataset contains 53940 observations and 10 variables. It includes numerical features such as <code>carat</code>, <code>price</code>, and the physical dimensions <code>x</code>, <code>y</code>, and <code>z</code>, alongside categorical features describing quality attributes, including <code>cut</code>, <code>color</code>, and <code>clarity</code>. These variables form the basis for the price modeling task revisited in Chapter <a href="10-Regression.html" class="quarto-xref"><span>10</span></a>. The key variables in the dataset are summarized below:</p>
<ul>
<li>
<code>carat</code>: weight of the diamond (approximately 0.2 to 5.01);</li>
<li>
<code>cut</code>: quality of the cut (Fair, Good, Very Good, Premium, Ideal);</li>
<li>
<code>color</code>: color grade, from D (most colorless) to J (least colorless);</li>
<li>
<code>clarity</code>: clarity grade, from I1 (least clear) to IF (flawless);</li>
<li>
<code>depth</code>: total depth percentage, calculated as <code>2 * z / (x + y)</code>;</li>
<li>
<code>table</code>: width of the top facet relative to the widest point;</li>
<li>
<code>x</code>, <code>y</code>, <code>z</code>: physical dimensions in millimeters;</li>
<li>
<code>price</code>: price in US dollars.</li>
</ul>
<p>Before cleaning or transforming these variables, it is important to understand how they are represented and what type of information they encode. Different feature types require different preparation strategies. In the next section, we examine how the variables in the <code>diamonds</code> dataset are structured and classified.</p>
</section></section><section id="identifying-feature-types" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="identifying-feature-types">
<span class="header-section-number">3.3</span> Identifying Feature Types</h2>
<p>Before detecting outliers or encoding variables, it is essential to understand the types of features present in a dataset. Whether a variable is numerical or categorical, and how it is structured within these broad groups, determines which preprocessing steps are appropriate and how models interpret the data. Figure <a href="#fig-ch3-feature-type" class="quarto-xref"><span>3.1</span></a> summarizes the main feature types commonly encountered in data science.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ch3-feature-type" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-pos="H" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch3-feature-type-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/ch3_feature_type.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%" data-fig-pos="H">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch3-feature-type-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: Overview of common feature types used in data analysis, including numerical (continuous and discrete) and categorical (ordinal, nominal, and binary) variables.
</figcaption></figure>
</div>
</div>
</div>
<p>Features are commonly grouped into two broad categories: <em>quantitative (numerical)</em> and <em>categorical (qualitative)</em>, each with important subtypes.</p>
<p><em>Quantitative (Numerical) features</em> represent measurable quantities:</p>
<ul>
<li><p><em>Continuous features</em> can take any value within a range. In the <code>diamonds</code> dataset, variables such as <code>carat</code>, <code>price</code>, and the physical dimensions <code>x</code>, <code>y</code>, and <code>z</code> fall into this category.</p></li>
<li><p><em>Discrete features</em> take on countable values, typically integers. While not present in the <code>diamonds</code> dataset, examples include counts such as the number of purchases or visits.</p></li>
</ul>
<p><em>Categorical (Qualitative) features</em> describe group membership:</p>
<ul>
<li><p><em>Ordinal features</em> have a meaningful order, although the spacing between levels is not necessarily uniform. In the <code>diamonds</code> dataset, variables such as <code>cut</code>, <code>color</code>, and <code>clarity</code> are ordinal. For instance, <code>color</code> ranges from D (most colorless) to J (least colorless).</p></li>
<li><p><em>Nominal features</em> represent categories with no inherent order, such as product types or blood groups.</p></li>
<li><p><em>Binary features</em> consist of exactly two categories, such as “yes”/“no” or “male”/“female”, and are often encoded numerically as 0 and 1.</p></li>
</ul>
<p>Although the <code>diamonds</code> dataset does not include discrete, nominal, or binary features, these variable types are common in applied data science and require distinct preparation strategies.</p>
<p>In R, the way a variable is stored affects how it is handled during analysis. Continuous variables are typically stored as <code>numeric</code>, discrete variables as <code>integer</code>, and categorical variables as <code>factor</code> objects, which may be either ordered or unordered. It is therefore important to verify how R interprets each variable. For example, a feature that is conceptually ordinal may be treated as an unordered factor unless it is explicitly declared as <code>ordered = TRUE</code>.</p>
<p>With the feature types clearly identified, we can now proceed to the next stage of data preparation, beginning with the detection of outliers that may distort analysis and modeling results.</p>
</section><section id="sec-ch3-data-pre-outliers" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="sec-ch3-data-pre-outliers">
<span class="header-section-number">3.4</span> Outliers: What They Are and Why They Matter</h2>
<p>Outliers are observations that deviate markedly from the overall pattern of a dataset. They may arise from data entry errors, unusual measurement conditions, or genuinely rare but informative events. Regardless of their origin, outliers can have a disproportionate impact on data analysis, influencing summary statistics, distorting visualizations, and affecting the behavior of machine learning models.</p>
<p>In applied settings, the presence of outliers often carries important implications. An unusually large transaction may signal fraudulent activity, an extreme laboratory measurement could reflect a rare medical condition or a faulty instrument, and atypical sensor readings may indicate process instability or equipment failure. Such examples illustrate that outliers are not inherently problematic but often require careful interpretation.</p>
<p>Not all outliers should be treated as errors. Some represent meaningful exceptions that provide valuable insight, while others reflect noise or measurement issues. Deciding how to interpret outliers therefore requires both statistical reasoning and domain knowledge. Treating all extreme values uniformly, either by automatic removal or unquestioned retention, can lead to misleading conclusions.</p>
<p>Outliers are often first identified using visual tools such as boxplots, histograms, and scatter plots, which provide an intuitive view of how observations are distributed. More formal criteria, including z-scores and interquartile range (IQR) thresholds, offer complementary quantitative perspectives. In the next section, we use visual diagnostics to examine how outliers appear in the <code>diamonds</code> dataset and why they matter for subsequent analysis.</p>
</section><section id="spotting-outliers-with-visual-tools" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="spotting-outliers-with-visual-tools">
<span class="header-section-number">3.5</span> Spotting Outliers with Visual Tools</h2>
<p>Visualization provides a natural starting point for identifying outliers, offering an intuitive view of how observations are distributed and where extreme values occur. Visual tools make it easier to distinguish between typical variation and values that may warrant closer scrutiny, whether due to data entry errors, unusual measurement conditions, or genuinely rare cases.</p>
<p>In this section, we illustrate visual outlier detection using the <code>y</code> variable (diamond width) from the <code>diamonds</code> dataset. This variable is particularly well suited for demonstration purposes, as it contains values that fall outside the range expected for real diamonds and therefore highlights how visual diagnostics can reveal implausible or extreme observations before formal modeling begins.</p>
<section id="boxplots-visualizing-and-flagging-outliers" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="boxplots-visualizing-and-flagging-outliers">Boxplots: Visualizing and Flagging Outliers</h3>
<p>Boxplots provide a concise visual summary of a variable’s distribution by displaying its central tendency, spread, and potential extreme values. They are particularly useful for identifying observations that fall far outside the typical range of the data. As illustrated in Figure <a href="#fig-simple-boxplot" class="quarto-xref"><span>3.2</span></a>, boxplots represent the interquartile range (IQR) and mark observations lying beyond 1.5 times the IQR from the quartiles as potential outliers.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-simple-boxplot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-pos="H" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-simple-boxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/ch3_simple_boxplot.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:40.0%" data-fig-pos="H">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-simple-boxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.2: Boxplots summarize a variable’s distribution and flag extreme values. Outliers are identified as points beyond 1.5 times the interquartile range (IQR) from the quartiles.
</figcaption></figure>
</div>
</div>
</div>
<p>To illustrate this in practice, we apply boxplots to the <code>y</code> variable (diamond width) in the <code>diamonds</code> dataset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Boxplot of Diamond Width (Full Scale)"</span>, y <span class="op">=</span> <span class="st">"Diamond Width (mm)"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Boxplot of Diamond Width (Zoomed View)"</span>, y <span class="op">=</span> <span class="st">"Diamond Width (mm)"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-align="center">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
</div>
<p>The full-scale boxplot shows that a small number of extreme values stretch the vertical axis, compressing the bulk of the distribution and making typical variation difficult to assess. The zoomed view reveals that most diamond widths lie between approximately 2 and 6 mm, with a limited number of observations falling well outside this range.</p>
<p>This contrast illustrates both the strength and limitation of boxplots: they efficiently flag extreme values, but extreme observations can dominate the visual scale. In practice, combining full-scale and zoomed views helps distinguish between typical variation and values that may require further investigation before modeling.</p>
<blockquote class="blockquote">
<p><em>Practice</em>: Apply the same boxplot-based outlier detection approach to the variables <code>x</code> and <code>z</code>, which represent the length and depth of diamonds. Create boxplots using both the full range of values and a zoomed-in view, and compare the resulting distributions with those observed for <code>y</code>. Do these variables exhibit similar extreme values or patterns that warrant further investigation?</p>
</blockquote>
</section><section id="histograms-revealing-outlier-patterns" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="histograms-revealing-outlier-patterns">Histograms: Revealing Outlier Patterns</h3>
<p>Histograms provide a complementary perspective to boxplots by displaying how observations are distributed across value ranges. They make it easier to assess the overall shape of a variable, including skewness, concentration, and the relative frequency of extreme values, which may be less apparent in summary-based plots.</p>
<p>The histogram below shows the distribution of the <code>y</code> variable (diamond width) using bins of width 0.5:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">y</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
<p>At this scale, most values are concentrated between approximately 2 and 6 mm, while observations at the extremes are compressed and difficult to distinguish. To better examine rare or extreme values, we restrict the vertical axis to a narrower range:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">y</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
<p>This zoomed view highlights the presence of unusually small and large values that occur infrequently relative to the main body of the data. Such observations may reflect data entry errors or genuinely rare cases and therefore merit closer inspection. Used alongside boxplots, histograms help distinguish between typical variation and values that may influence subsequent analysis or modeling.</p>
<blockquote class="blockquote">
<p><em>Practice</em>: Create histograms for the variables <code>x</code> and <code>z</code> using an appropriate bin width. Examine both the full distribution and a zoomed-in view of the frequency axis. How do the distributional shapes and extreme values compare with those observed for <code>y</code>, and do any values appear to warrant further investigation?</p>
</blockquote>
</section><section id="additional-tools-for-visual-outlier-detection" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="additional-tools-for-visual-outlier-detection">Additional Tools for Visual Outlier Detection</h3>
<p>Beyond boxplots and histograms, several other visualization tools are useful for identifying potential outliers in different analytical contexts.</p>
<ul>
<li><p><em>Scatter plots</em> are particularly effective for examining relationships between variables and identifying observations that deviate from overall trends, especially in bivariate or multivariate settings. For example, plotting <code>y</code> against <code>price</code> can reveal whether extreme widths correspond to unusual prices, a pattern we will revisit later in this chapter.</p></li>
<li><p><em>Violin plots</em> combine distributional shape with summary statistics, allowing extreme values to be viewed in the context of the full density.</p></li>
<li><p><em>Density plots</em> offer a smoothed representation of the data distribution, making long tails, skewness, or multiple modes easier to detect.</p></li>
</ul>
<p>These tools are most valuable during the early stages of analysis, when the goal is to scan for irregular patterns or unusual cases. As data dimensionality increases, however, visual inspection alone becomes less effective. In such situations, formal statistical methods provide more systematic and scalable approaches to outlier detection.</p>
<p>Having identified potential outliers using visual diagnostics, the next step is to decide how they should be handled. This involves determining whether extreme values should be retained, transformed, or removed based on their context and their influence on subsequent analysis and modeling.</p>
<blockquote class="blockquote">
<p><em>Practice</em>: Create density plots for the variables <code>x</code>, <code>y</code>, and <code>z</code> to examine their distributional shapes. Compare the presence of skewness, long tails, or secondary modes across the three dimensions. Do the density plots reveal extreme values or patterns that were less apparent in the boxplots or histograms?</p>
</blockquote>
</section></section><section id="sec-ch3-handle-outliers" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="sec-ch3-handle-outliers">
<span class="header-section-number">3.6</span> How to Handle Outliers</h2>
<p>Outliers appear in nearly every real-world dataset, and deciding how to handle them is a recurring challenge in data science. An unusually small diamond width or an exceptionally high price may reflect a data entry error, a rare but valid case, or a meaningful signal. Distinguishing between these possibilities requires careful judgment rather than automatic rules.</p>
<p>Once outliers have been identified, either visually or through statistical criteria, the next step is to decide how they should be handled. There is no universally correct strategy. The appropriate response depends on the nature of the outlier, the context in which the data were collected, and the goals of the analysis or model.</p>
<p>Several practical strategies are commonly used, each with its own trade-offs:</p>
<ul>
<li><p><em>Retain the outlier</em> when it represents a valid observation that may carry important information. In fraud detection, for example, extreme values are often precisely the cases of interest. Similarly, in the <em>adult</em> income dataset examined later in this chapter, unusually large values of <code>capital_gain</code> may correspond to genuinely high-income individuals. Removing such observations can reduce predictive power or obscure meaningful variation.</p></li>
<li><p><em>Replace the outlier with a missing value</em> when there is strong evidence that it is erroneous. Implausible measurements, such as negative carat values or clearly duplicated records, are often best treated as missing. Replacing them with <code>NA</code> allows for flexible downstream handling, including imputation strategies discussed in the next section.</p></li>
<li><p><em>Flag and preserve the outlier</em> by creating an indicator variable (for example, <code>is_outlier</code>). This approach retains potentially informative observations while allowing models to account for their special status.</p></li>
<li><p><em>Apply data transformations</em>, such as logarithmic or square-root transformations, to reduce the influence of extreme values while preserving relative differences. This strategy is particularly useful for skewed numerical variables.</p></li>
<li><p><em>Use modeling techniques that are robust to outliers</em>. Methods such as decision trees, random forests, and median-based estimators are less sensitive to extreme values than models that rely heavily on means or squared errors.</p></li>
<li><p><em>Apply winsorization</em>, which caps extreme values at specified percentiles (for example, the 1st and 99th percentiles). This approach limits the influence of outliers while retaining all observations and can be effective for models that are sensitive to extreme values, such as linear regression.</p></li>
<li><p><em>Remove the outlier</em> only when the value is clearly invalid, cannot be corrected or reasonably imputed, and would otherwise compromise the integrity of the analysis. This option should be considered a last resort rather than a default choice.</p></li>
</ul>
<p>In practice, a cautious and informed approach is essential. Automatically removing outliers may simplify analysis but risks discarding rare yet meaningful information. Thoughtful handling, guided by domain knowledge and analytical objectives, helps ensure that the data remain both reliable and informative.</p>
</section><section id="outlier-treatment-in-action" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="outlier-treatment-in-action">
<span class="header-section-number">3.7</span> Outlier Treatment in Action</h2>
<p>Having identified potential outliers, we now demonstrate how to handle them in practice using the <code>diamonds</code> dataset. We focus on the <code>y</code> variable, which measures diamond width. As shown earlier, this variable contains implausible values, including widths equal to 0 and values exceeding 30 mm, which are unlikely for real diamonds and are best treated as erroneous measurements.</p>
<p>To address these values, we replace them with missing values (<code>NA</code>) using the <strong>dplyr</strong> package. This approach preserves the remaining observations while allowing problematic entries to be handled flexibly in subsequent steps.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">diamonds_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">diamonds</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">y</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">|</span> <span class="va">y</span> <span class="op">&gt;</span> <span class="fl">30</span>, <span class="cn">NA</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This transformation creates a modified dataset, <code>diamonds_2</code>, in which implausible values of <code>y</code> have been recoded as missing. All other values remain unchanged. To assess the effect of this operation, we examine a summary of the updated variable:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(diamonds_2<span class="sc">$</span>y)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>      Min. <span class="dv">1</span>st Qu.  Median    Mean <span class="dv">3</span>rd Qu.    Max.    NA<span class="st">'s </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="st">     3.680   4.720   5.710   5.734   6.540  10.540       9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The summary confirms how many values were flagged and illustrates how the range of <code>y</code> has changed. The extreme values no longer dominate the distribution, resulting in a cleaner and more realistic representation of diamond width. With these implausible values removed, the variable is now better suited for further analysis and modeling. In the next section, we address the missing values introduced by this step and demonstrate how they can be imputed using statistically informed methods.</p>
<blockquote class="blockquote">
<p><em>Practice</em>: Apply the same outlier treatment to the variables <code>x</code> and <code>z</code>, which represent diamond length and depth. Identify any implausible values, replace them with <code>NA</code>, and use <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> to evaluate the effect of your changes.</p>
</blockquote>
</section><section id="sec-ch3-missing-values" class="level2" data-number="3.8"><h2 data-number="3.8" class="anchored" data-anchor-id="sec-ch3-missing-values">
<span class="header-section-number">3.8</span> Missing Values: What They Are and Why They Matter</h2>
<p>Missing values are not merely blank entries: they often carry important information about how data were collected and where limitations may arise. Incomplete data can obscure patterns, distort statistical summaries, and mislead models if not handled carefully. For this reason, identifying and addressing missing values is a critical step before drawing conclusions or fitting predictive algorithms.</p>
<p>As illustrated by the well-known example of Abraham Wald (Section <a href="2-Intro-data-science.html#sec-ch2-Problem-Understanding" class="quarto-xref"><span>2.4</span></a>), missing data are not always random. Wald’s insight emerged from what was <em>not</em> observed: damage on aircraft that failed to return. In data science, the absence of information can be as informative as its presence, and ignoring this distinction can lead to flawed assumptions and unreliable results.</p>
<p>In R, missing values are typically represented as <code>NA</code>. In practice, however, real-world datasets often encode missingness using special placeholder values such as <code>-1</code>, <code>999</code>, or <code>99.9</code>. These codes are easy to overlook and, if left untreated, can quietly undermine analysis. For example, in the <em>cereal</em> dataset from the <strong>liver</strong> package (Section <a href="13-Clustering.html#sec-ch13-case-study" class="quarto-xref"><span>13.4</span></a>), the <code>calories</code> variable uses <code>-1</code> to indicate missing data. Similarly, in the <em>bank</em> marketing dataset (Section <a href="12-Neural-networks.html#sec-ch12-case-study" class="quarto-xref"><span>12.6</span></a>), the <code>pday</code> variable uses <code>-1</code> to denote that a client was not previously contacted. Recognizing and recoding such placeholders is therefore an essential first step.</p>
<p>A common but risky response to missing data is to remove incomplete observations. While this approach is simple, it can be highly inefficient. Even modest levels of missingness across multiple variables can lead to substantial data loss. For example, if 5% of values are missing across 30 variables, removing all rows with at least one missing entry may eliminate a large fraction of the dataset. More principled strategies aim to preserve information while limiting bias.</p>
<p>Broadly, two main approaches are used to handle missing data:</p>
<ul>
<li><p><em>Imputation</em>, which replaces missing values with plausible estimates based on observed data, allowing all records to be retained.</p></li>
<li><p><em>Removal</em>, which excludes rows or variables containing missing values and is typically reserved for cases where missingness is extensive or uninformative.</p></li>
</ul>
<p>In the sections that follow, we examine how to identify missing values in practice and introduce several imputation techniques that support more complete, reliable, and interpretable analyses.</p>
</section><section id="sec-ch3-imputation-techniques" class="level2" data-number="3.9"><h2 data-number="3.9" class="anchored" data-anchor-id="sec-ch3-imputation-techniques">
<span class="header-section-number">3.9</span> Imputation Techniques</h2>
<p>Once missing values have been identified, the next step is to choose an appropriate strategy for estimating them. The choice of imputation method depends on the structure of the data, the purpose of the analysis, and the level of complexity that is warranted. Commonly used approaches include the following:</p>
<ul>
<li><p><em>Mean, median, or mode imputation</em> replaces missing values with a single summary statistic. Mean imputation is typically used for approximately symmetric numerical variables, median imputation for skewed distributions, and mode imputation for categorical variables. These methods are simple and efficient but may underestimate variability.</p></li>
<li><p><em>Random sampling imputation</em> replaces missing values by drawing at random from the observed values of the same variable. This approach better preserves the original distribution than mean or median imputation, but it introduces randomness into the dataset.</p></li>
<li><p><em>Predictive imputation</em> estimates missing values using relationships with other variables, for example through linear regression, decision trees, or <em>k</em>-nearest neighbors. These methods are particularly effective when strong associations exist among features.</p></li>
<li><p><em>Multiple imputation</em> creates several completed datasets by repeatedly imputing missing values and then combining results across them. By accounting for uncertainty in the imputed values, this approach is especially useful for statistical inference and uncertainty quantification.</p></li>
</ul>
<p>Selecting an imputation strategy involves balancing simplicity, interpretability, and accuracy. For variables with limited missingness and weak dependencies, simple methods may be sufficient. When missingness is more substantial or variables are strongly related, predictive or multiple imputation approaches generally provide more reliable results. In cases where a variable is missing too frequently to be imputed credibly, excluding it or reconsidering its role in the analysis may be appropriate.</p>
<p>In the next subsection, we demonstrate random sampling imputation for its simplicity and illustrative value. In later chapters, including Chapter <a href="13-Clustering.html" class="quarto-xref"><span>13</span></a>, we revisit imputation using more advanced methods such as Random Forest–based approaches. This progression reflects how data preparation strategies often evolve as analytical demands increase.</p>
<section id="random-sampling-imputation-in-r" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="random-sampling-imputation-in-r">Random Sampling Imputation in R</h3>
<p>We now demonstrate imputation in practice using the <code>y</code> variable (diamond width) from the <code>diamonds</code> dataset. Implausible values identified earlier, such as widths equal to 0 or exceeding 30 mm, were recoded as missing (<code>NA</code>). The goal here is to replace these missing entries using <em>random sampling imputation</em>, a simple method that draws replacement values from the observed distribution of the same variable.</p>
<p>We use the <code><a href="https://rdrr.io/pkg/Hmisc/man/impute.html">impute()</a></code> function from the <strong>Hmisc</strong> package, which supports several basic imputation strategies through the <code>fun</code> argument. Common options include <code>"mean"</code> and <code>"median"</code> for numerical variables, <code>"mode"</code> for categorical variables, and <code>"random"</code> for random sampling imputation. Each choice reflects a different trade-off. Mean or median imputation is deterministic and easy to interpret but may reduce variability, while random sampling preserves the marginal distribution at the cost of introducing randomness. The choice of method should therefore be guided by the structure of the variable and the goals of the analysis. Here we apply random sampling imputation:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://hbiostat.org/R/Hmisc/">Hmisc</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">diamonds_2</span><span class="op">$</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Hmisc/man/impute.html">impute</a></span><span class="op">(</span><span class="va">diamonds_2</span><span class="op">$</span><span class="va">y</span>, fun <span class="op">=</span> <span class="st">"random"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This operation replaces each missing value in <code>y</code> with a randomly selected observed value from the same variable. Random sampling imputation preserves the marginal distribution of the data but introduces randomness into the completed dataset. For this reason, it is most appropriate for exploratory analysis and illustrative purposes rather than final model deployment.</p>
<p>To evaluate the effect of imputation, we compare the relationship between diamond width (<code>y</code>) and price before and after imputation:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">y</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Before Imputation"</span>, x <span class="op">=</span> <span class="st">"Diamond Width (y)"</span>, y <span class="op">=</span> <span class="st">"Price"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds_2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">y</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"After Imputation"</span>, x <span class="op">=</span> <span class="st">"Diamond Width (y)"</span>, y <span class="op">=</span> <span class="st">"Price"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-align="center">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
</div>
<p>The comparison shows that after removing implausible values and imputing missing entries, the overall relationship between diamond width and price is preserved, while extreme artifacts that could distort modeling are removed. This diagnostic step helps assess whether imputation has altered meaningful structure in the data.</p>
<blockquote class="blockquote">
<p><em>Practice</em>: Apply random sampling imputation to the variables <code>x</code> and <code>z</code>, which represent diamond length and depth. After identifying implausible values and recoding them as <code>NA</code>, impute the missing entries and examine how the relationships with price change.</p>
</blockquote>
</section><section id="other-imputation-approaches" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="other-imputation-approaches">Other Imputation Approaches</h3>
<p>In addition to random sampling, several alternative imputation strategies are commonly used in practice. Simple statistical methods, such as mean, median, or mode imputation, can be applied using the <code><a href="https://rdrr.io/pkg/Hmisc/man/impute.html">impute()</a></code> function from the <strong>Hmisc</strong> package. These approaches are computationally efficient and easy to interpret but rely on strong assumptions and may underestimate variability.</p>
<p>For more flexible predictive imputation, the <code><a href="https://rdrr.io/pkg/Hmisc/man/aregImpute.html">aregImpute()</a></code> function in <strong>Hmisc</strong> offers an extension based on additive regression and bootstrapping. By leveraging relationships among variables, this approach often produces more realistic imputations than single-value replacement, particularly when missingness is moderate and predictors are informative.</p>
<p>When multiple variables contain correlated missing values, multivariate approaches are often preferred. The <strong>mice</strong> (Multivariate Imputation by Chained Equations) package implements an iterative procedure in which each variable with missing data is modeled conditionally on the others. This framework explicitly accounts for uncertainty in the imputations and is especially useful in complex datasets. In Chapter <a href="13-Clustering.html#sec-ch13-case-study" class="quarto-xref"><span>13.4</span></a>, we apply <code>mice()</code> to handle missing values in the <em>cereal</em> dataset, illustrating its use in a realistic data preparation workflow.</p>
<p>Although removing incomplete observations with <code><a href="https://rdrr.io/r/stats/na.fail.html">na.omit()</a></code> is simple, it is rarely advisable. This strategy can lead to substantial information loss and biased results, particularly when missingness is not random. In most applied settings, thoughtful imputation provides a more reliable foundation for subsequent analysis and modeling.</p>
</section></section><section id="sec-ch3-data-pre-adult" class="level2" data-number="3.10"><h2 data-number="3.10" class="anchored" data-anchor-id="sec-ch3-data-pre-adult">
<span class="header-section-number">3.10</span> Case Study: Preparing Data to Predict High Earners</h2>
<p>How can we determine whether an individual earns more than $50,000 per year based on demographic and occupational characteristics? This question arises in a wide range of applied settings, including economic research, policy analysis, and the development of data-driven decision systems.</p>
<p>In this case study, we work with the <em>adult</em> dataset, originally derived from data collected by the US Census Bureau and made available through the <strong>liver</strong> package. The dataset includes variables such as age, education, marital status, occupation, and income, and it presents many of the data preparation challenges commonly encountered in practice. Our objective is to prepare the data for predicting whether an individual’s annual income exceeds $50,000, rather than to build a predictive model at this stage.</p>
<p>The focus here is therefore on data preparation tasks: identifying and handling missing values, simplifying and encoding categorical variables, and examining numerical features for potential outliers. These steps are essential for ensuring that the dataset is suitable for downstream modeling. In Chapter <a href="11-Tree-based-models.html" class="quarto-xref"><span>11</span></a>, we return to the <em>adult</em> dataset to construct and evaluate predictive models using decision trees and random forests (see Section <a href="11-Tree-based-models.html#sec-ch11-case-study" class="quarto-xref"><span>11.5</span></a>), completing the transition from raw data to model-based decision making.</p>
<section id="overview-of-the-dataset" class="level3 unlisted" data-number="3.10.1"><h3 class="unlisted anchored" data-number="3.10.1" data-anchor-id="overview-of-the-dataset">
<span class="header-section-number">3.10.1</span> Overview of the Dataset</h3>
<p>The <em>adult</em> dataset is a widely used benchmark in machine learning for studying income prediction based on demographic and occupational characteristics. It reflects many of the data preparation challenges commonly encountered in real-world applications. To begin, we load the dataset from the <strong>liver</strong> package:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://book-data-science-r.netlify.app">liver</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">adult</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To examine the dataset structure and variable types, we use the <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> function:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(adult)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>   <span class="st">'data.frame'</span><span class="sc">:</span>    <span class="dv">48598</span> obs. of  <span class="dv">15</span> variables<span class="sc">:</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="er">$</span> age           <span class="sc">:</span> int  <span class="dv">25</span> <span class="dv">38</span> <span class="dv">28</span> <span class="dv">44</span> <span class="dv">18</span> <span class="dv">34</span> <span class="dv">29</span> <span class="dv">63</span> <span class="dv">24</span> <span class="dv">55</span> ...</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> workclass     <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">6</span> levels <span class="st">"?"</span>,<span class="st">"Gov"</span>,<span class="st">"Never-worked"</span>,..<span class="sc">:</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">5</span> <span class="dv">4</span> <span class="dv">4</span> ...</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> demogweight   <span class="sc">:</span> int  <span class="dv">226802</span> <span class="dv">89814</span> <span class="dv">336951</span> <span class="dv">160323</span> <span class="dv">103497</span> <span class="dv">198693</span> <span class="dv">227026</span> <span class="dv">104626</span> <span class="dv">369667</span> <span class="dv">104996</span> ...</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> education     <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">16</span> levels <span class="st">"10th"</span>,<span class="st">"11th"</span>,..<span class="sc">:</span> <span class="dv">2</span> <span class="dv">12</span> <span class="dv">8</span> <span class="dv">16</span> <span class="dv">16</span> <span class="dv">1</span> <span class="dv">12</span> <span class="dv">15</span> <span class="dv">16</span> <span class="dv">6</span> ...</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> education_num <span class="sc">:</span> int  <span class="dv">7</span> <span class="dv">9</span> <span class="dv">12</span> <span class="dv">10</span> <span class="dv">10</span> <span class="dv">6</span> <span class="dv">9</span> <span class="dv">15</span> <span class="dv">10</span> <span class="dv">4</span> ...</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> marital_status<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">5</span> levels <span class="st">"Divorced"</span>,<span class="st">"Married"</span>,..<span class="sc">:</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">2</span> ...</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> occupation    <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">15</span> levels <span class="st">"?"</span>,<span class="st">"Adm-clerical"</span>,..<span class="sc">:</span> <span class="dv">8</span> <span class="dv">6</span> <span class="dv">12</span> <span class="dv">8</span> <span class="dv">1</span> <span class="dv">9</span> <span class="dv">1</span> <span class="dv">11</span> <span class="dv">9</span> <span class="dv">4</span> ...</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> relationship  <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">6</span> levels <span class="st">"Husband"</span>,<span class="st">"Not-in-family"</span>,..<span class="sc">:</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">5</span> <span class="dv">1</span> <span class="dv">5</span> <span class="dv">1</span> ...</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> race          <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">5</span> levels <span class="st">"Amer-Indian-Eskimo"</span>,..<span class="sc">:</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> ...</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> gender        <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">2</span> levels <span class="st">"Female"</span>,<span class="st">"Male"</span><span class="sc">:</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> ...</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> capital_gain  <span class="sc">:</span> int  <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">7688</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">3103</span> <span class="dv">0</span> <span class="dv">0</span> ...</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> capital_loss  <span class="sc">:</span> int  <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> ...</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> hours_per_week<span class="sc">:</span> int  <span class="dv">40</span> <span class="dv">50</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">40</span> <span class="dv">32</span> <span class="dv">40</span> <span class="dv">10</span> ...</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> native_country<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">41</span> levels <span class="st">"?"</span>,<span class="st">"Cambodia"</span>,..<span class="sc">:</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> <span class="dv">39</span> ...</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="sc">$</span> income        <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">2</span> levels <span class="st">"&lt;=50K"</span>,<span class="st">"&gt;50K"</span><span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span> ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dataset contains 48598 observations and 15 variables. Most variables serve as predictors, while the target variable, <code>income</code>, indicates whether an individual earns more than $50,000 per year (<code>&gt;50K</code>) or not (<code>&lt;=50K</code>). The dataset includes a mixture of numerical and categorical features describing demographic, educational, and economic characteristics.</p>
<p>The main variables are summarized below:</p>
<ul>
<li>
<code>age</code>: age in years (numerical);</li>
<li>
<code>workclass</code>: employment type (categorical, 6 levels);</li>
<li>
<code>demogweight</code>: census weighting factor (numerical);</li>
<li>
<code>education</code>: highest educational attainment (categorical, 16 levels);</li>
<li>
<code>education_num</code>: years of education (numerical);</li>
<li>
<code>marital_status</code>: marital status (categorical, 5 levels);</li>
<li>
<code>occupation</code>: job type (categorical, 15 levels);</li>
<li>
<code>relationship</code>: household role (categorical, 6 levels);</li>
<li>
<code>race</code>: racial background (categorical, 5 levels);</li>
<li>
<code>gender</code>: gender identity (categorical, 2 levels);</li>
<li>
<code>capital_gain</code>: annual capital gains (numerical);</li>
<li>
<code>capital_loss</code>: annual capital losses (numerical);</li>
<li>
<code>hours_per_week</code>: weekly working hours (numerical);</li>
<li>
<code>native_country</code>: country of origin (categorical, 42 levels);</li>
<li>
<code>income</code>: income bracket (<code>&lt;=50K</code> or <code>&gt;50K</code>).</li>
</ul>
<p>For data preparation purposes, the variables can be grouped as follows. Numerical variables include <code>age</code>, <code>demogweight</code>, <code>education_num</code>, <code>capital_gain</code>, <code>capital_loss</code>, and <code>hours_per_week</code>. The variables <code>gender</code> and <code>income</code> are binary. The variable <code>education</code> is ordinal, with levels ordered from “Preschool” to “Doctorate”. The remaining categorical variables, namely <code>workclass</code>, <code>marital_status</code>, <code>occupation</code>, <code>relationship</code>, <code>race</code>, and <code>native_country</code>, are nominal.</p>
<p>To gain an initial overview of distributions and identify potential issues, we inspect summary statistics using:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adult)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>         age              workclass      demogweight             education     education_num         marital_status </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    Min.   <span class="sc">:</span><span class="fl">17.0</span>   ?           <span class="sc">:</span> <span class="dv">2794</span>   Min.   <span class="sc">:</span>  <span class="dv">12285</span>   HS<span class="sc">-</span>grad     <span class="sc">:</span><span class="dv">15750</span>   Min.   <span class="sc">:</span> <span class="fl">1.00</span>   Divorced     <span class="sc">:</span> <span class="dv">6613</span>  </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">28.0</span>   Gov         <span class="sc">:</span> <span class="dv">6536</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span> <span class="dv">117550</span>   Some<span class="sc">-</span>college<span class="sc">:</span><span class="dv">10860</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span> <span class="fl">9.00</span>   Married      <span class="sc">:</span><span class="dv">22847</span>  </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    Median <span class="sc">:</span><span class="fl">37.0</span>   Never<span class="sc">-</span>worked<span class="sc">:</span>   <span class="dv">10</span>   Median <span class="sc">:</span> <span class="dv">178215</span>   Bachelors   <span class="sc">:</span> <span class="dv">7962</span>   Median <span class="sc">:</span><span class="fl">10.00</span>   Never<span class="sc">-</span>married<span class="sc">:</span><span class="dv">16096</span>  </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    Mean   <span class="sc">:</span><span class="fl">38.6</span>   Private     <span class="sc">:</span><span class="dv">33780</span>   Mean   <span class="sc">:</span> <span class="dv">189685</span>   Masters     <span class="sc">:</span> <span class="dv">2627</span>   Mean   <span class="sc">:</span><span class="fl">10.06</span>   Separated    <span class="sc">:</span> <span class="dv">1526</span>  </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">48.0</span>   Self<span class="sc">-</span>emp    <span class="sc">:</span> <span class="dv">5457</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span> <span class="dv">237713</span>   Assoc<span class="sc">-</span>voc   <span class="sc">:</span> <span class="dv">2058</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">12.00</span>   Widowed      <span class="sc">:</span> <span class="dv">1516</span>  </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    Max.   <span class="sc">:</span><span class="fl">90.0</span>   Without<span class="sc">-</span>pay <span class="sc">:</span>   <span class="dv">21</span>   Max.   <span class="sc">:</span><span class="dv">1490400</span>   <span class="dv">11</span>th        <span class="sc">:</span> <span class="dv">1812</span>   Max.   <span class="sc">:</span><span class="fl">16.00</span>                        </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                                                          (Other)     <span class="sc">:</span> <span class="dv">7529</span>                                        </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>              occupation            relationship                   race          gender       capital_gain    </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    Craft<span class="sc">-</span>repair   <span class="sc">:</span> <span class="dv">6096</span>   Husband       <span class="sc">:</span><span class="dv">19537</span>   Amer<span class="sc">-</span>Indian<span class="sc">-</span>Eskimo<span class="sc">:</span>  <span class="dv">470</span>   Female<span class="sc">:</span><span class="dv">16156</span>   Min.   <span class="sc">:</span>    <span class="fl">0.0</span>  </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    Prof<span class="sc">-</span>specialty <span class="sc">:</span> <span class="dv">6071</span>   Not<span class="sc">-</span><span class="cf">in</span><span class="sc">-</span>family <span class="sc">:</span><span class="dv">12546</span>   Asian<span class="sc">-</span>Pac<span class="sc">-</span>Islander<span class="sc">:</span> <span class="dv">1504</span>   Male  <span class="sc">:</span><span class="dv">32442</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span>    <span class="fl">0.0</span>  </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    Exec<span class="sc">-</span>managerial<span class="sc">:</span> <span class="dv">6019</span>   Other<span class="sc">-</span>relative<span class="sc">:</span> <span class="dv">1506</span>   Black             <span class="sc">:</span> <span class="dv">4675</span>                  Median <span class="sc">:</span>    <span class="fl">0.0</span>  </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    Adm<span class="sc">-</span>clerical   <span class="sc">:</span> <span class="dv">5603</span>   Own<span class="sc">-</span>child     <span class="sc">:</span> <span class="dv">7577</span>   Other             <span class="sc">:</span>  <span class="dv">403</span>                  Mean   <span class="sc">:</span>  <span class="fl">582.4</span>  </span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    Sales          <span class="sc">:</span> <span class="dv">5470</span>   Unmarried     <span class="sc">:</span> <span class="dv">5118</span>   White             <span class="sc">:</span><span class="dv">41546</span>                  <span class="dv">3</span>rd Qu.<span class="sc">:</span>    <span class="fl">0.0</span>  </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    Other<span class="sc">-</span>service  <span class="sc">:</span> <span class="dv">4920</span>   Wife          <span class="sc">:</span> <span class="dv">2314</span>                                             Max.   <span class="sc">:</span><span class="fl">41310.0</span>  </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    (Other)        <span class="sc">:</span><span class="dv">14419</span>                                                                                     </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>     capital_loss     hours_per_week        native_country    income     </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    Min.   <span class="sc">:</span>   <span class="fl">0.00</span>   Min.   <span class="sc">:</span> <span class="fl">1.00</span>   United<span class="sc">-</span>States<span class="sc">:</span><span class="dv">43613</span>   <span class="sc">&lt;=</span><span class="dv">50</span>K<span class="sc">:</span><span class="dv">37155</span>  </span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>st Qu.<span class="sc">:</span>   <span class="fl">0.00</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">40.00</span>   Mexico       <span class="sc">:</span>  <span class="dv">949</span>   <span class="sc">&gt;</span><span class="dv">50</span>K <span class="sc">:</span><span class="dv">11443</span>  </span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    Median <span class="sc">:</span>   <span class="fl">0.00</span>   Median <span class="sc">:</span><span class="fl">40.00</span>   ?            <span class="sc">:</span>  <span class="dv">847</span>                </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    Mean   <span class="sc">:</span>  <span class="fl">87.94</span>   Mean   <span class="sc">:</span><span class="fl">40.37</span>   Philippines  <span class="sc">:</span>  <span class="dv">292</span>                </span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>rd Qu.<span class="sc">:</span>   <span class="fl">0.00</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">45.00</span>   Germany      <span class="sc">:</span>  <span class="dv">206</span>                </span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    Max.   <span class="sc">:</span><span class="fl">4356.00</span>   Max.   <span class="sc">:</span><span class="fl">99.00</span>   Puerto<span class="sc">-</span>Rico  <span class="sc">:</span>  <span class="dv">184</span>                </span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>                                      (Other)      <span class="sc">:</span> <span class="dv">2507</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This overview provides the starting point for the data preparation steps that follow. We begin by identifying and handling missing values, an essential task for ensuring the completeness and reliability of the dataset before modeling.</p>
</section><section id="handling-missing-values" class="level3 unlisted" data-number="3.10.2"><h3 class="unlisted anchored" data-number="3.10.2" data-anchor-id="handling-missing-values">
<span class="header-section-number">3.10.2</span> Handling Missing Values</h3>
<p>Inspection of the dataset using <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> reveals that three variables, <code>workclass</code>, <code>occupation</code>, and <code>native_country</code>, contain missing entries. In this dataset, however, missing values are not encoded as <code>NA</code> but as the string <code>"?"</code>, a placeholder commonly used in public datasets such as those from the UCI Machine Learning Repository. Because R does not automatically treat <code>"?"</code> as missing, these values must be recoded explicitly:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">adult</span><span class="op">[</span><span class="va">adult</span> <span class="op">==</span> <span class="st">"?"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This command replaces all occurrences of the string <code>"?"</code> in the dataset with <code>NA</code>. The logical expression <code>adult == "?"</code> creates a matrix of TRUE and FALSE values, indicating where the placeholder appears. Assigning <code>NA</code> to these positions ensures that R correctly recognizes the affected entries as missing values in subsequent analyses.</p>
<p>After recoding, we apply <code><a href="https://rdrr.io/r/base/droplevels.html">droplevels()</a></code> to remove unused factor levels. This step helps avoid complications in later stages, particularly when encoding categorical variables for modeling:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">adult</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html">droplevels</a></span><span class="op">(</span><span class="va">adult</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To assess the extent of missingness, we visualize missing values using the <code><a href="https://naniar.njtierney.com/reference/gg_miss_var.html">gg_miss_var()</a></code> function from the <strong>naniar</strong> package, which displays both counts and percentages of missing entries by variable:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njtierney/naniar">naniar</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://naniar.njtierney.com/reference/gg_miss_var.html">gg_miss_var</a></span><span class="op">(</span><span class="va">adult</span>, show_pct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
<p>The resulting plot confirms that missing values occur only in three variables: <code>workclass</code> with 2794 entries, <code>occupation</code> with 2804 entries, and <code>native_country</code> with 847 entries.</p>
<p>Because the proportion of missing values is small, we choose to impute these entries rather than remove incomplete observations, which would lead to unnecessary information loss. To preserve the empirical distribution of each variable, we apply random sampling imputation using the <code><a href="https://rdrr.io/pkg/Hmisc/man/impute.html">impute()</a></code> function from the <strong>Hmisc</strong> package:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://hbiostat.org/R/Hmisc/">Hmisc</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">adult</span><span class="op">$</span><span class="va">workclass</span>      <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Hmisc/man/impute.html">impute</a></span><span class="op">(</span><span class="va">adult</span><span class="op">$</span><span class="va">workclass</span>,      fun <span class="op">=</span> <span class="st">"random"</span><span class="op">)</span></span>
<span><span class="va">adult</span><span class="op">$</span><span class="va">native_country</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Hmisc/man/impute.html">impute</a></span><span class="op">(</span><span class="va">adult</span><span class="op">$</span><span class="va">native_country</span>, fun <span class="op">=</span> <span class="st">"random"</span><span class="op">)</span></span>
<span><span class="va">adult</span><span class="op">$</span><span class="va">occupation</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Hmisc/man/impute.html">impute</a></span><span class="op">(</span><span class="va">adult</span><span class="op">$</span><span class="va">occupation</span>,     fun <span class="op">=</span> <span class="st">"random"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we re-examine the pattern of missingness to confirm that all missing values have been addressed:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://naniar.njtierney.com/reference/gg_miss_var.html">gg_miss_var</a></span><span class="op">(</span><span class="va">adult</span>, show_pct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
<p>With missing values handled, the dataset is now complete and ready for the next stage of preparation: simplifying and encoding categorical features for modeling.</p>
<blockquote class="blockquote">
<p><em>Practice</em>: Replace the random sampling imputation used above with an alternative strategy, such as mode imputation for the categorical variables <code>workclass</code>, <code>occupation</code>, and <code>native_country</code>. Compare the resulting category frequencies with those obtained using random sampling. How do different imputation choices affect the distribution of these variables, and what implications might this have for downstream modeling?</p>
</blockquote>
</section><section id="preparing-categorical-features" class="level3 unnumbered unlisted"><h3 class="unnumbered unlisted anchored" data-anchor-id="preparing-categorical-features">Preparing Categorical Features</h3>
<p>Categorical variables with many distinct levels can pose challenges for both interpretation and modeling, particularly by increasing model complexity and sparsity. In the <em>adult</em> dataset, the variables <code>native_country</code> and <code>workclass</code> contain a relatively large number of categories. To improve interpretability and reduce dimensionality, we group related categories into broader, more meaningful classes.</p>
<p>We begin with the variable <code>native_country</code>, which contains 40 distinct country labels. Treating each country as a separate category would substantially expand the feature space without necessarily improving predictive performance. Instead, we group countries into broader geographic regions that reflect cultural and linguistic proximity.</p>
<p>Specifically, we define the following regions: Europe (France, Germany, Greece, Hungary, Ireland, Italy, Netherlands, Poland, Portugal, United Kingdom, Yugoslavia), North America (United States, Canada, and outlying US territories), Latin America (including Mexico, Central America, and parts of South America), the Caribbean (Jamaica, Haiti, Trinidad and Tobago), and Asia (including East, South, and Southeast Asian countries).</p>
<p>This reclassification is implemented using the <code><a href="https://forcats.tidyverse.org/reference/fct_collapse.html">fct_collapse()</a></code> function from the <strong>forcats</strong> package, which allows multiple factor levels to be combined into a smaller set of user-defined categories:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/">forcats</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">Europe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"France"</span>, <span class="st">"Germany"</span>, <span class="st">"Greece"</span>, <span class="st">"Hungary"</span>, <span class="st">"Ireland"</span>, <span class="st">"Italy"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Poland"</span>, <span class="st">"Portugal"</span>, <span class="st">"United-Kingdom"</span>, <span class="st">"Yugoslavia"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">North_America</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"United-States"</span>, <span class="st">"Canada"</span>, <span class="st">"Outlying-US(Guam-USVI-etc)"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Latin_America</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Mexico"</span>, <span class="st">"El-Salvador"</span>, <span class="st">"Guatemala"</span>, <span class="st">"Honduras"</span>, <span class="st">"Nicaragua"</span>, <span class="st">"Cuba"</span>, <span class="st">"Dominican-Republic"</span>, <span class="st">"Puerto-Rico"</span>, <span class="st">"Colombia"</span>, <span class="st">"Ecuador"</span>, <span class="st">"Peru"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Caribbean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Jamaica"</span>, <span class="st">"Haiti"</span>, <span class="st">"Trinidad&amp;Tobago"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Asia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Cambodia"</span>, <span class="st">"China"</span>, <span class="st">"Hong-Kong"</span>, <span class="st">"India"</span>, <span class="st">"Iran"</span>, <span class="st">"Japan"</span>, <span class="st">"Laos"</span>, <span class="st">"Philippines"</span>, <span class="st">"South"</span>, <span class="st">"Taiwan"</span>, <span class="st">"Thailand"</span>, <span class="st">"Vietnam"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adult</span><span class="op">$</span><span class="va">native_country</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_collapse.html">fct_collapse</a></span><span class="op">(</span></span>
<span>  <span class="va">adult</span><span class="op">$</span><span class="va">native_country</span>,</span>
<span>  <span class="st">"Europe"</span>        <span class="op">=</span> <span class="va">Europe</span>,</span>
<span>  <span class="st">"North America"</span> <span class="op">=</span> <span class="va">North_America</span>,</span>
<span>  <span class="st">"Latin America"</span> <span class="op">=</span> <span class="va">Latin_America</span>,</span>
<span>  <span class="st">"Caribbean"</span>     <span class="op">=</span> <span class="va">Caribbean</span>,</span>
<span>  <span class="st">"Asia"</span>          <span class="op">=</span> <span class="va">Asia</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To verify the result, we inspect the frequency table of the updated variable:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(adult<span class="sc">$</span>native_country)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>            Asia North America Latin America        Europe     Caribbean </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>            <span class="dv">1108</span>         <span class="dv">44582</span>          <span class="dv">1899</span>           <span class="dv">797</span>           <span class="dv">212</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A similar simplification is applied to the <code>workclass</code> variable. Two levels, <code>"Never-worked"</code> and <code>"Without-pay"</code>, occur infrequently and both describe individuals outside formal employment. Treating these categories separately adds sparsity without providing meaningful distinction. We therefore merge them into a single category, <code>Unemployed</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">adult</span><span class="op">$</span><span class="va">workclass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_collapse.html">fct_collapse</a></span><span class="op">(</span> <span class="va">adult</span><span class="op">$</span><span class="va">workclass</span>, </span>
<span>                      <span class="st">"Unemployed"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Never-worked"</span>, <span class="st">"Without-pay"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Again, we verify the recoding using a frequency table:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(adult<span class="sc">$</span>workclass)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>          Gov Unemployed    Private   Self<span class="sc">-</span>emp </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>         <span class="dv">6919</span>         <span class="dv">32</span>      <span class="dv">35851</span>       <span class="dv">5796</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By grouping <code>native_country</code> into broader regions and simplifying <code>workclass</code>, we reduce categorical sparsity while preserving interpretability. These steps help ensure that the dataset is well suited for modeling methods that are sensitive to high-cardinality categorical features.</p>
</section><section id="handling-outliers" class="level3 unlisted" data-number="3.10.3"><h3 class="unlisted anchored" data-number="3.10.3" data-anchor-id="handling-outliers">
<span class="header-section-number">3.10.3</span> Handling Outliers</h3>
<p>We now examine the variable <code>capital_loss</code> from the <em>adult</em> dataset to assess the presence and relevance of outliers. This variable is a natural candidate for such analysis, as it contains a large proportion of zero values alongside a small number of relatively large observations.</p>
<p>We begin by inspecting basic summary statistics:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adult<span class="sc">$</span>capital_loss)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>      Min. <span class="dv">1</span>st Qu.  Median    Mean <span class="dv">3</span>rd Qu.    Max. </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>      <span class="fl">0.00</span>    <span class="fl">0.00</span>    <span class="fl">0.00</span>   <span class="fl">87.94</span>    <span class="fl">0.00</span> <span class="fl">4356.00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The output shows that the minimum value is 0 and the maximum is 4356. More than 75% of observations are equal to zero. The median, 0, is substantially lower than the mean, 87.94, indicating a right-skewed distribution driven by a small number of large values.</p>
<p>To explore this structure visually, we examine both a boxplot and a histogram:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">adult</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">capital_loss</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Boxplot of Capital Loss"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">adult</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">capital_loss</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Histogram of Capital Loss"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-align="center">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
</div>
<p>Both plots confirm the strong positive skew: most individuals report no capital loss, while a small number exhibit substantially higher values, with visible concentration around 2,000 and 4,000.</p>
<p>To better understand the distribution among individuals with nonzero capital loss, we restrict attention to observations where <code>capital_loss &gt; 0</code>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">subset_adult</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">adult</span>, <span class="va">capital_loss</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">subset_adult</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">capital_loss</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Boxplot of Nonzero Capital Loss"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">subset_adult</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">capital_loss</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Histogram of Nonzero Capital Loss"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-align="center">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="3-Data-preparation_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-pos="H"></p>
</figure>
</div>
</div>
</div>
</div>
<p>Within this subset, most values lie below 500, with a small number exceeding 4,000. Despite their rarity, these larger values follow a relatively smooth and approximately symmetric pattern, suggesting that they represent genuine variation rather than data entry errors.</p>
<p>Based on this evidence, we retain the extreme values in <code>capital_loss</code>. Removing them would risk discarding meaningful information about individuals with substantial financial losses. If these values later prove problematic for modeling, alternative strategies may be considered, such as applying a log or square-root transformation, creating a binary indicator for the presence of capital loss, or using winsorization to limit the influence of extreme values.</p>
<p>This analysis also provides useful context for examining the related variable <code>capital_gain</code>, which we consider next. A hands-on extension of this analysis is included in the exercises at the end of the chapter.</p>
</section></section><section id="chapter-summary-and-takeaways" class="level2" data-number="3.11"><h2 data-number="3.11" class="anchored" data-anchor-id="chapter-summary-and-takeaways">
<span class="header-section-number">3.11</span> Chapter Summary and Takeaways</h2>
<p>This chapter examined the practical foundations of data preparation, showing how raw and inconsistent data can be transformed into a structured and reliable form suitable for analysis and modeling. Through hands-on work with the <code>diamonds</code> and <em>adult</em> datasets, we addressed common challenges such as identifying and handling outliers, detecting and imputing missing values, and resolving inconsistencies in real-world data.</p>
<p>A central theme of the chapter was that data preparation is not a purely mechanical process. Decisions about how to treat outliers, encode categorical variables, or impute missing values must be guided by an understanding of the data-generating process and the goals of the analysis. Poor preparation can obscure meaningful patterns, while thoughtful preprocessing strengthens interpretability and model reliability.</p>
<p>These techniques form a critical foundation for all subsequent stages of the Data Science Workflow. Without clean and well-prepared data, even the most advanced methods are unlikely to produce credible results.</p>
<p>In the next chapter, we build on this foundation by turning to exploratory data analysis, using visualization and summary statistics to investigate patterns, relationships, and potential signals that inform model development.</p>
</section><section id="sec-ch3-exercises" class="level2" data-number="3.12"><h2 data-number="3.12" class="anchored" data-anchor-id="sec-ch3-exercises">
<span class="header-section-number">3.12</span> Exercises</h2>
<p>The exercises in this chapter strengthen both conceptual understanding and practical skills in data preparation. They progress from foundational questions on data types and missingness to hands-on applications using the <em>diamonds</em>, <em>adult</em>, and <code>house_price</code> datasets. Together, they reinforce key tasks such as identifying outliers, imputing missing values, and cleaning categorical features, and conclude with self-reflection on the role of data preparation in reliable, ethical, and interpretable analysis.</p>
<section id="conceptual-questions" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="conceptual-questions">Conceptual Questions</h4>
<ol type="1">
<li><p>Explain the difference between continuous and discrete numerical variables, and provide a real-world example of each.</p></li>
<li><p>Describe how ordinal and nominal categorical variables differ. Provide one example for each type.</p></li>
<li><p>Explain how the <code><a href="https://rdrr.io/r/base/typeof.html">typeof()</a></code> and <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> functions differ in R, and why both may be relevant when preparing data for modeling.</p></li>
<li><p>Explain why it is important to identify the correct data types before modeling.</p></li>
<li><p>Discuss the advantages and disadvantages of removing outliers versus applying a transformation.</p></li>
<li><p>In a dataset where 25% of income values are missing, explain which imputation strategy you would use and justify your choice.</p></li>
<li><p>Explain why outlier detection should often be performed separately for numerical and categorical variables. Provide one example for each type.</p></li>
<li><p>Discuss how data preparation choices, such as imputation or outlier removal, can influence the fairness and interpretability of a predictive model.</p></li>
<li><p>Describe how reproducibility can be ensured during data preparation. What practices or tools in R help document cleaning and transformation steps effectively?</p></li>
</ol></section><section id="hands-on-practice-data-preparation-for-diamonds-dataset" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="hands-on-practice-data-preparation-for-diamonds-dataset">Hands-On Practice: Data Preparation for <code>diamonds</code> Dataset</h4>
<ol start="10" type="1">
<li><p>Use <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> to inspect the <code>diamonds</code> dataset. What patterns or irregularities do you observe?</p></li>
<li><p>Classify all variables in the <code>diamonds</code> dataset as numerical, ordinal, or nominal.</p></li>
<li><p>Create histograms of <code>carat</code> and <code>price</code>. Describe their distributions and note any skewness or gaps.</p></li>
<li><p>Identify outliers in the <code>x</code> variable using boxplots and histograms. If outliers are found, handle them using a method similar to the one applied to <code>y</code> in Section <a href="#sec-ch3-data-pre-outliers" class="quarto-xref"><span>3.4</span></a>.</p></li>
<li><p>Repeat the outlier detection process for the <code>z</code> variable and comment on the results.</p></li>
<li><p>Examine the <code>depth</code> variable. Suggest an appropriate method to detect and address outliers in this case.</p></li>
<li><p>Compute summary statistics for the variables <code>x</code>, <code>y</code>, and <code>z</code> after outlier handling. How do the results differ from the original summaries?</p></li>
<li><p>Visualize the relationship between <code>carat</code> and <code>price</code> using a scatter plot. What pattern do you observe, and how might outliers influence it?</p></li>
<li><p>Using the <code>dplyr</code> package, create a new variable representing the volume of each diamond (<code>x * y * z</code>). Summarize and visualize this variable to detect any unrealistic or extreme values.</p></li>
</ol></section><section id="hands-on-practice-data-preparation-for-adult-dataset" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="hands-on-practice-data-preparation-for-adult-dataset">Hands-On Practice: Data Preparation for <em>adult</em> Dataset</h4>
<ol start="19" type="1">
<li><p>Load the <em>adult</em> dataset from the <strong>liver</strong> package and classify its categorical variables as nominal or ordinal.</p></li>
<li><p>Compute the proportion of individuals earning more than $50K and interpret what this reveals about the income distribution.</p></li>
<li><p>Create a boxplot and histogram of <code>capital_gain</code>. Describe any patterns, anomalies, or extreme values.</p></li>
<li><p>Identify outliers in <code>capital_gain</code> and suggest an appropriate method for handling them.</p></li>
<li><p>Compute and visualize a correlation matrix for the numerical variables. What do the correlations reveal about the relationships among features?</p></li>
<li><p>Use the <code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code> function to group <code>age</code> into three categories: Young (<span class="math inline">\(\le 30\)</span>), Middle-aged (31–50), and Senior (<span class="math inline">\(&gt;50\)</span>). Name the new variable <code>Age_Group</code>.</p></li>
<li><p>Calculate the mean <code>capital_gain</code> for each <code>Age_Group</code>. What trends do you observe?</p></li>
<li><p>Create a binary variable indicating whether an individual has nonzero <code>capital_gain</code>, and use it to produce an exploratory plot.</p></li>
<li><p>Use <code><a href="https://forcats.tidyverse.org/reference/fct_collapse.html">fct_collapse()</a></code> to group the education levels into broader categories. Propose at least three meaningful groupings and justify your choices.</p></li>
<li><p>Define a new variable <code>net.capital</code> as the difference between <code>capital_gain</code> and <code>capital_loss</code>. Visualize its distribution and comment on your findings.</p></li>
<li><p>Investigate the relationship between <code>hours_per_week</code> and income level using boxplots or violin plots. What differences do you observe between income groups?</p></li>
<li><p>Detect missing or undefined values in the <code>occupation</code> variable and replace them with an appropriate imputation method. Justify your choice.</p></li>
<li><p>Examine whether combining certain rare <code>native_country</code> categories (for example, by continent or region) improves interpretability without losing important variation. Discuss your reasoning.</p></li>
</ol></section><section id="hands-on-practice-data-preparation-for-house_price-dataset" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="hands-on-practice-data-preparation-for-house_price-dataset">Hands-On Practice: Data Preparation for <code>house_price</code> Dataset</h4>
<ol start="32" type="1">
<li><p>Load the <code>house_price</code> dataset from the <strong>liver</strong> package. Identify variables with missing values and describe any observable patterns of missingness.</p></li>
<li><p>Detect outliers in <code>SalePrice</code> using boxplots and histograms. Discuss whether they appear to be data entry errors or meaningful extremes.</p></li>
<li><p>Apply median imputation to one variable with missing data and comment on how the imputed values affect the summary statistics.</p></li>
<li><p>Suggest two or more improvements you would make to prepare this dataset for modeling.</p></li>
<li><p>Use the <code>skimr</code> package (or <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>) to generate an overview of all variables. Which variables may require transformation or grouping before modeling?</p></li>
<li><p>Create a scatter plot of <code>GrLivArea</code> versus <code>SalePrice</code>. Identify any potential non-linear relationships or influential points that may warrant further investigation.</p></li>
<li><p>Compute the correlation between <code>OverallQual</code>, <code>GrLivArea</code>, and <code>SalePrice</code>. What insights do these relationships provide about property value drivers?</p></li>
<li><p>Create a new categorical feature by grouping houses into price tiers (e.g., <em>Low</em>, <em>Medium</em>, <em>High</em>) based on quantiles of <code>SalePrice</code>. Visualize the distribution of <code>OverallQual</code> across these groups and interpret your findings.</p></li>
</ol></section><section id="self-reflection" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="self-reflection">Self-Reflection</h4>
<ol start="40" type="1">
<li><p>Explain how your approach to handling outliers might differ between patient temperature data and income data.</p></li>
<li><p>Consider a model that performs well during training but poorly in production. Reflect on how decisions made during data preparation could contribute to this discrepancy.</p></li>
<li><p>Reflect on a dataset you have worked with (or use the <code>house_price</code> dataset). Which data preparation steps would you revise based on the techniques covered in this chapter?</p></li>
<li><p>Describe how data preparation choices, such as grouping categories or removing extreme values, can influence the fairness and interpretability of machine learning models.</p></li>
<li><p>Summarize the most important lesson you learned from working through this chapter’s exercises. How will it change the way you approach raw data in future projects?</p></li>
</ol>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/book-data-science-r\.netlify\.app");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./2-Intro-data-science.html" class="pagination-link" aria-label="The Data Science Workflow and the Role of Machine Learning">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Data Science Workflow and the Role of Machine Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./4-Exploratory-data-analysis.html" class="pagination-link" aria-label="Exploratory Data Analysis">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Data Science Foundations and Machine Learning with R was written by <a href="https://www.uva.nl/profile/a.mohammadi"><span style="color:#0056B3">Reza Mohammadi</span></a>.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/RezaMoammadi/Book-Data-Science-R/edit/main/3-Data-preparation.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/RezaMoammadi/Book-Data-Science-R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>